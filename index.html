<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mes Deadlines</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="apple-touch-icon" href="Images/apple-icon.png" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    </script>
</head>

<body>
    <input type="file" id="pdf-upload-input" accept="application/pdf" style="display: none;" />

    <div id="auth-container">
        <div id="auth-left">
            <div id="project-stats" style="display: none;">
                <span id="completed-count">0</span> / <span id="total-count">0</span> PROJETS
            </div>
        </div>

        <div id="user-level-container" style="display: none;">
            <span id="level-badge">LVL 1</span>
            <div id="xp-bar-bg">
                <div id="xp-bar-fill"></div>
            </div>
            <span id="xp-text">0 / 1300 XP</span>

            <span id="user-coins"
                style="color: #00ff00; margin-left: 15px; font-weight: bold; border: 1px solid #00ff00; padding: 2px 5px;">
                0 ‚Çµ
            </span>
        </div>

        <div id="auth-right">
            <span id="user-details" style="display:none;"></span>

            <button id="help-btn" title="Manuel d'utilisation">‚ùì AIDE</button>

            <button id="login-btn">Se connecter</button>
            <button id="signup-btn">Cr√©er un compte</button>

            <button id="settings-btn" style="display: none; font-size: 1.2em;" title="R√©glages">‚öôÔ∏è</button>
        </div>
    </div>

    <header>
        <h1>My Deadlines</h1>
    </header>

    <main>
        <div class="dashboard-container">

            <aside class="left-sidebar">
                <section id="companion-section" class="project-card" style="display:none;">
                    <div class="companion-header">
                        <h2>Compagnon</h2>
                        <span id="pet-level-display">NIV 1</span>
                    </div>
                    <div style="text-align: center; margin-bottom: 10px;">
                        <span id="pet-name-display" style="color: #fff; font-weight: bold;">...</span>
                    </div>

                    <div id="pet-stage">
                        <pre id="pet-visual">( o_o )</pre>
                    </div>

                    <div class="pet-status-bar">
                        <div id="pet-xp-bar-inner" style="width: 0%"></div>
                    </div>

                    <div class="pet-actions">
                        <button id="feed-btn" class="pet-btn">‚ö° Nourrir (10 XP)</button>
                        <button id="rename-btn" class="pet-btn">‚úé Nom (50 XP)</button>
                    </div>

                    <div id="pet-message">En attente...</div>
                </section>

                <section id="pomodoro-section" class="project-card" style="display:none;">
                    <div class="companion-header">
                        <h2>FOCUS TIMER</h2>
                    </div>

                    <div id="pomodoro-display">25:00</div>

                    <div class="pet-actions">
                        <button id="pomo-start-btn" class="pet-btn">‚ñ∂ START</button>
                        <button id="pomo-reset-btn" class="pet-btn" style="color: #ff0000; border-color: #ff0000;">‚Ü∫
                            RESET</button>
                    </div>
                </section>

            </aside>

            <div class="right-content">
                <section id="form-container">
                    <h2>Ajouter un projet</h2>
                    <form id="project-form">
                        <input type="text" id="project-name" placeholder="MISSION (Nom du projet)" required />

                        <select id="project-priority"
                            style="grid-column: 1 / -1; padding: 10px; background: #111; color: #fff; border: 1px solid #555;">
                            <option value="p1">üî¥ CRITIQUE (Urgent + Important)</option>
                            <option value="p2">üîµ STRAT√âGIQUE (Important)</option>
                            <option value="p3">üü° SUPPORT (Urgent mais secondaire)</option>
                            <option value="p4">‚ö™ SECONDAIRE (Ni urgent, ni important)</option>
                        </select>

                        <label for="start-date">D√©but :</label>
                        <input type="date" id="start-date" required />

                        <label for="end-date">Fin :</label>
                        <input type="date" id="end-date" required />

                        <button type="submit" id="add-project-btn" disabled>INITIALISER LA MISSION</button>
                    </form>
                </section>

                <hr />

                <section id="projects-container">
                    <div class="project-column" id="pending-column">
                        <h2>Mes projets en cours</h2>
                        <div id="pending-projects-list"></div>
                    </div>

                    <div class="project-column" id="archive-link-column">
                        <h2>Archives</h2>
                        <a href="archives.html" id="archive-link-btn">
                            Voir les projets termin√©s
                        </a>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <footer>
        <div id="footer-content">
            <span>&copy; 2025 Moust4ki</span>

            <div id="social-links">
                <a href="https://github.com/MoUst4ki-tech" target="_blank">GitHub</a>
            </div>
        </div>
    </footer>

    <script src="script.js" type="module"></script>
    <div id="custom-modal-overlay" style="display: none;">
        <div id="custom-modal-box">
            <h3 id="modal-title">SYSTEM MESSAGE</h3>
            <p id="modal-text">...</p>

            <input type="text" id="modal-input" style="display: none;" placeholder="Saisir ici..." autocomplete="off">

            <div class="modal-buttons">
                <button id="modal-btn-cancel" class="pet-btn"
                    style="border-color: #ff0000; color: #ff0000;">ANNULER</button>
                <button id="modal-btn-ok" class="pet-btn">CONFIRMER</button>
            </div>
        </div>
    </div>
    <div id="help-modal-overlay" style="display: none;">
        <div id="help-modal-box">
            <h2 style="color: #FFFF00; border-bottom: 1px solid #333; padding-bottom: 10px;">MANUEL DU JOUEUR</h2>

            <div class="help-content"
                style="text-align: left; max-height: 60vh; overflow-y: auto; padding-right: 10px;">
                <h3 style="color: #00ff00;">1. üéØ Projets & XP</h3>
                <p>Cr√©ez des projets avec une deadline.
                    <br>- <strong>En cours :</strong> La barre de progression avance avec le temps.
                    <br>- <strong>Urgent :</strong> Devient ROUGE s'il reste moins de 3 jours.
                    <br>- <strong>Termin√© :</strong> Cliquez sur "Terminer" pour gagner de l'XP et des Cr√©dits (‚Çµ).
                </p>

                <h3 style="color: #00ff00;">2. ü§ñ Compagnon (Pet)</h3>
                <p>Votre compagnon √©volue selon votre niveau.
                    <br>- <strong>Nourrir :</strong> Co√ªte 5‚Çµ, donne de l'XP au pet.
                    <br>- <strong>√âvolution :</strong> Le visuel change aux niveaux 3, 5, 8 et 12.
                </p>

                <h3 style="color: #00ff00;">3. üß† IA & PDF (Gemini)</h3>
                <p>G√©n√©rez une checklist automatique pour vos projets :
                    <br>1. Configurez votre cl√© API (Bouton ‚öôÔ∏è API).
                    <br>2. Cliquez sur <strong>"üìÑ IA TASKS"</strong> sur un projet.
                    <br>3. S√©lectionnez un fichier PDF (cours, brief, etc.).
                    <br>4. L'IA analyse et cr√©e la liste des t√¢ches.
                </p>

                <h3 style="color: #00ff00;">4. üçÖ Pomodoro</h3>
                <p>Utilisez le timer (25min) pour rester focus. Le titre de l'onglet change pour afficher le temps
                    restant.</p>
            </div>

            <div style="margin-top: 20px;">
                <button id="close-help-btn" class="pet-btn">COMPRIS</button>
            </div>
        </div>
    </div>
    <div id="settings-overlay" style="display: none;">
        <div id="settings-box">
            <h3>PARAM√àTRES</h3>

            <div class="settings-section">
                <label>üé® Interface :</label>
                <select id="theme-selector">
                    <option value="theme-retro">Cyberpunk (Actuel)</option>
                    <option value="theme-classic">Classique (Sombre)</option>
                    <option value="theme-light">Clair (Bureau)</option>
                </select>
            </div>

            <div class="settings-section">
                <label>üîë Cl√© API Gemini :</label>
                <input type="password" id="settings-api-key" placeholder="Ta cl√© API ici...">
                <button id="save-api-btn" class="pet-btn">Enregistrer</button>
            </div>

            <hr style="border-color: #333; margin: 20px 0;">

            <button id="logout-btn-settings" class="pet-btn"
                style="border-color: #ff0000; color: #ff0000; width: 100%;">
                SE D√âCONNECTER
            </button>

            <button id="close-settings-btn"
                style="margin-top: 10px; background: transparent; border: none; color: #777; cursor: pointer; width: 100%;">
                Fermer
            </button>
        </div>
    </div>
</body>

</html>